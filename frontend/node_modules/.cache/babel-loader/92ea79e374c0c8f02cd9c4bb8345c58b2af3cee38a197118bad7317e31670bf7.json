{"ast":null,"code":"var _jsxFileName = \"D:\\\\Uknord5he\\\\BH3\\\\\\u043F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0430 3 \\u043A\\u0443\\u0440\\u0441\\\\frontend\\\\src\\\\pages\\\\SearchPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useSearchParams, useParams } from 'react-router-dom';\nimport FilterBar from '../components/FilterBar';\nimport DiplomaTable from '../components/DiplomaTable';\nimport { getDiplomas } from '../services/diplomaService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SearchPage() {\n  _s();\n  const [params, setParams] = useSearchParams();\n  const {\n    name: specialtyFromRoute\n  } = useParams(); // для /specialty/:name\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState({\n    items: [],\n    total: 0,\n    page: 1,\n    pages: 1\n  });\n  const page = Number(params.get('page') || 1);\n  const name = params.get('name') || '';\n  const year = params.get('year') || '';\n  const specialty = specialtyFromRoute || params.get('specialty') || '';\n  const fetchList = async () => {\n    setLoading(true);\n    const resp = await getDiplomas({\n      search: name || undefined,\n      year: year || undefined,\n      specialty: specialty || undefined,\n      page,\n      limit: 10\n    });\n    // сервис может вернуть {items,total,page,pages} или массив — подстрахуемся\n    setData(Array.isArray(resp) ? {\n      items: resp,\n      total: resp.length,\n      page,\n      pages: 1\n    } : resp);\n    setLoading(false);\n  };\n  useEffect(() => {\n    fetchList();\n  }, [page, name, year, specialty]);\n  const handleFilter = values => {\n    const next = new URLSearchParams(params);\n    if (values.name) next.set('name', values.name);else next.delete('name');\n    if (values.year) next.set('year', values.year);else next.delete('year');\n    if (values.specialty) next.set('specialty', values.specialty);else next.delete('specialty');\n    next.set('page', '1');\n    setParams(next);\n  };\n  const goto = p => {\n    const next = new URLSearchParams(params);\n    next.set('page', String(p));\n    setParams(next);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-6xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold mb-4\",\n      children: \"\\u041F\\u043E\\u0448\\u0443\\u043A \\u0434\\u0438\\u043F\\u043B\\u043E\\u043C\\u0456\\u0432\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FilterBar, {\n      onFilter: handleFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 24\n    }, this) : /*#__PURE__*/_jsxDEV(DiplomaTable, {\n      diplomas: data.items || []\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 49\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex gap-2\",\n      children: Array.from({\n        length: data.pages || 1\n      }, (_, i) => i + 1).map(p => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => goto(p),\n        className: `px-3 py-1 rounded border ${p === (data.page || 1) ? 'bg-blue-600 text-white' : 'bg-white'}`,\n        children: p\n      }, p, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n_s(SearchPage, \"LLpV1vuO2FDJp3/ALwhTj3z5tNA=\", false, function () {\n  return [useSearchParams, useParams];\n});\n_c = SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useEffect","useState","useSearchParams","useParams","FilterBar","DiplomaTable","getDiplomas","jsxDEV","_jsxDEV","SearchPage","_s","params","setParams","name","specialtyFromRoute","loading","setLoading","data","setData","items","total","page","pages","Number","get","year","specialty","fetchList","resp","search","undefined","limit","Array","isArray","length","handleFilter","values","next","URLSearchParams","set","delete","goto","p","String","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onFilter","diplomas","from","_","i","map","onClick","_c","$RefreshReg$"],"sources":["D:/Uknord5he/BH3/практика 3 курс/frontend/src/pages/SearchPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSearchParams, useParams } from 'react-router-dom';\r\nimport FilterBar from '../components/FilterBar';\r\nimport DiplomaTable from '../components/DiplomaTable';\r\nimport { getDiplomas } from '../services/diplomaService';\r\n\r\nexport default function SearchPage() {\r\n    const [params, setParams] = useSearchParams();\r\n    const { name: specialtyFromRoute } = useParams(); // для /specialty/:name\r\n    const [loading, setLoading] = useState(false);\r\n    const [data, setData] = useState({ items: [], total: 0, page: 1, pages: 1 });\r\n\r\n    const page = Number(params.get('page') || 1);\r\n    const name = params.get('name') || '';\r\n    const year = params.get('year') || '';\r\n    const specialty = specialtyFromRoute || params.get('specialty') || '';\r\n\r\n    const fetchList = async () => {\r\n        setLoading(true);\r\n        const resp = await getDiplomas({\r\n            search: name || undefined,\r\n            year: year || undefined,\r\n            specialty: specialty || undefined,\r\n            page,\r\n            limit: 10\r\n        });\r\n        // сервис может вернуть {items,total,page,pages} или массив — подстрахуемся\r\n        setData(Array.isArray(resp) ? { items: resp, total: resp.length, page, pages: 1 } : resp);\r\n        setLoading(false);\r\n    };\r\n\r\n    useEffect(() => { fetchList(); }, [page, name, year, specialty]);\r\n\r\n    const handleFilter = (values) => {\r\n        const next = new URLSearchParams(params);\r\n        if (values.name) next.set('name', values.name); else next.delete('name');\r\n        if (values.year) next.set('year', values.year); else next.delete('year');\r\n        if (values.specialty) next.set('specialty', values.specialty); else next.delete('specialty');\r\n        next.set('page', '1');\r\n        setParams(next);\r\n    };\r\n\r\n    const goto = (p) => {\r\n        const next = new URLSearchParams(params);\r\n        next.set('page', String(p));\r\n        setParams(next);\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto\">\r\n            <h2 className=\"text-2xl font-semibold mb-4\">Пошук дипломів</h2>\r\n            <FilterBar onFilter={handleFilter} />\r\n            {loading ? <p>Завантаження...</p> : <DiplomaTable diplomas={data.items || []} />}\r\n            <div className=\"mt-4 flex gap-2\">\r\n                {Array.from({ length: data.pages || 1 }, (_, i) => i + 1).map(p => (\r\n                    <button\r\n                        key={p}\r\n                        onClick={() => goto(p)}\r\n                        className={`px-3 py-1 rounded border ${p === (data.page || 1) ? 'bg-blue-600 text-white' : 'bg-white'}`}\r\n                    >\r\n                        {p}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}