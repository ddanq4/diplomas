{"ast":null,"code":"var _jsxFileName = \"D:\\\\Uknord5he\\\\BH3\\\\dev\\\\diplomas\\\\frontend\\\\src\\\\pages\\\\AddDiplomaPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { createDiploma, getFilters } from '../services/diplomaService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MAX_FILE_MB = Number(process.env.REACT_APP_MAX_FILE_MB || 10);\nconst ALLOWED_EXTS = ['pdf', 'png', 'jpg', 'jpeg'];\nconst extOf = (name = '') => {\n  var _String$toLowerCase$m;\n  return ((_String$toLowerCase$m = String(name).toLowerCase().match(/\\.([a-z0-9]+)(?:\\?.*)?$/)) === null || _String$toLowerCase$m === void 0 ? void 0 : _String$toLowerCase$m[1]) || '';\n};\nconst isAllowedType = file => !!file && (ALLOWED_EXTS.includes(extOf(file.name)) || file.type === 'application/pdf' || file.type === 'image/png' || file.type === 'image/jpeg');\nconst formatSize = bytes => `${(bytes / 1024 / 1024).toFixed(1)} МБ`;\nconst validateFile = file => {\n  if (!file) return {\n    ok: false,\n    message: 'Файл не обрано'\n  };\n  if (!isAllowedType(file)) return {\n    ok: false,\n    message: 'Дозволені лише PDF, PNG, JPG'\n  };\n  if (file.size > MAX_FILE_MB * 1024 * 1024) return {\n    ok: false,\n    message: `Максимальний розмір ${MAX_FILE_MB} МБ (ваш ${formatSize(file.size)})`\n  };\n  return {\n    ok: true\n  };\n};\nexport default function AddDiplomaPage() {\n  _s();\n  const nav = useNavigate();\n  const fileRef = useRef(null);\n\n  // Довідники по ключам\n  const [opts, setOpts] = useState({\n    facultiesOptions: [],\n    // [{key,name}]\n    specialtyOptionsByFacultyKey: {} // { facKey: [{key,label}] }\n  });\n  const [form, setForm] = useState({\n    studentName: '',\n    facultyKey: '',\n    specialty: '',\n    // ХРАНИМ, что выбрал пользователь (обычно key, но подстрахуемся)\n    year: '',\n    diplomaNumber: ''\n  });\n  const [file, setFile] = useState(null);\n  const [err, setErr] = useState('');\n  const [busy, setBusy] = useState(false);\n  const [progress, setProgress] = useState(0); // сейчас fetch без прогресса, но поле не мешает\n\n  // единый список всех спеціальностей (на случай выбора без факультета и для маппинга label→key)\n  const allSpecOptions = useMemo(() => {\n    const seen = new Set();\n    const all = [];\n    Object.values(opts.specialtyOptionsByFacultyKey).forEach(arr => {\n      (arr || []).forEach(s => {\n        if (!seen.has(s.key)) {\n          seen.add(s.key);\n          all.push({\n            key: s.key,\n            label: s.label\n          });\n        }\n      });\n    });\n    return all;\n  }, [opts.specialtyOptionsByFacultyKey]);\n\n  // опции для текущего факультета (или пусто, выбор «зі всіх» мы не делаем в Add — здесь просим факультет)\n  const specList = form.facultyKey ? opts.specialtyOptionsByFacultyKey[form.facultyKey] || [] : [];\n  useEffect(() => {\n    (async () => {\n      try {\n        const data = await getFilters();\n        setOpts({\n          facultiesOptions: data.facultiesOptions || [],\n          specialtyOptionsByFacultyKey: data.specialtyOptionsByFacultyKey || {}\n        });\n      } catch (e) {\n        var _e$payload;\n        setErr((e === null || e === void 0 ? void 0 : (_e$payload = e.payload) === null || _e$payload === void 0 ? void 0 : _e$payload.message) || (e === null || e === void 0 ? void 0 : e.message) || 'Помилка завантаження довідників');\n      }\n    })();\n  }, []);\n  const onChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (name === 'file') {\n      setFile((files === null || files === void 0 ? void 0 : files[0]) || null);\n      return;\n    }\n    setForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (name === 'facultyKey') setForm(prev => ({\n      ...prev,\n      specialty: ''\n    }));\n  };\n\n  // Подстраховка: если вдруг в state оказался label, а не key — конвертируем в key\n  const normalizeSpecialtyToKey = val => {\n    if (!val) return val;\n    // если это уже key — вернётся как есть\n    const foundByKey = allSpecOptions.find(s => s.key === val);\n    if (foundByKey) return foundByKey.key;\n    // может быть пришёл label\n    const foundByLabel = allSpecOptions.find(s => s.label === val);\n    return foundByLabel ? foundByLabel.key : val;\n  };\n  const onSubmit = async e => {\n    var _fileRef$current, _fileRef$current$file;\n    e.preventDefault();\n    setErr('');\n    const realFile = file || ((_fileRef$current = fileRef.current) === null || _fileRef$current === void 0 ? void 0 : (_fileRef$current$file = _fileRef$current.files) === null || _fileRef$current$file === void 0 ? void 0 : _fileRef$current$file[0]) || null;\n    const vf = validateFile(realFile);\n    if (!vf.ok) {\n      setErr(vf.message);\n      return;\n    }\n    try {\n      setBusy(true);\n      const fd = new FormData();\n      fd.append('studentName', form.studentName.trim());\n      fd.append('specialty', normalizeSpecialtyToKey(form.specialty)); // БЭК ждёт КЛЮЧ\n      fd.append('year', String(form.year));\n      fd.append('diplomaNumber', form.diplomaNumber.trim());\n      fd.append('file', realFile);\n      const saved = await createDiploma(fd);\n      nav(`/diplomas/${(saved === null || saved === void 0 ? void 0 : saved.id) || ''}`);\n    } catch (e2) {\n      var _e2$payload;\n      // показываем реальное сообщение с бэка\n      setErr((e2 === null || e2 === void 0 ? void 0 : (_e2$payload = e2.payload) === null || _e2$payload === void 0 ? void 0 : _e2$payload.message) || (e2 === null || e2 === void 0 ? void 0 : e2.message) || 'Помилка збереження');\n    } finally {\n      setBusy(false);\n      setProgress(0);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4 max-w-2xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0434\\u0438\\u043F\\u043B\\u043E\\u043C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3 text-red-600\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmit,\n      className: \"space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"studentName\",\n        value: form.studentName,\n        onChange: onChange,\n        placeholder: \"\\u041F\\u0406\\u0411\",\n        className: \"w-full border p-2 rounded\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"facultyKey\",\n        value: form.facultyKey,\n        onChange: onChange,\n        className: \"w-full border p-2 rounded\",\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"\\u041E\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u0444\\u0430\\u043A\\u0443\\u043B\\u044C\\u0442\\u0435\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), opts.facultiesOptions.map(f => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: f.key,\n          children: f.name\n        }, f.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 45\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"specialty\",\n        value: form.specialty,\n        onChange: onChange,\n        className: \"w-full border p-2 rounded\",\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: form.facultyKey ? 'Оберіть спеціальність' : 'Спочатку оберіть факультет'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), specList.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: s.key,\n          children: s.label\n        }, s.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 32\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"year\",\n          type: \"number\",\n          min: \"1900\",\n          max: \"2100\",\n          value: form.year,\n          onChange: onChange,\n          placeholder: \"\\u0420\\u0456\\u043A\",\n          className: \"w-40 border p-2 rounded\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"diplomaNumber\",\n          value: form.diplomaNumber,\n          onChange: onChange,\n          placeholder: \"\\u2116 \\u0434\\u0438\\u043F\\u043B\\u043E\\u043C\\u0443\",\n          className: \"flex-1 border p-2 rounded\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileRef,\n          name: \"file\",\n          type: \"file\",\n          accept: \"application/pdf,image/png,image/jpeg\",\n          onChange: onChange,\n          className: \"w-full border p-2 rounded\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs opacity-70\",\n          children: [\"\\u0414\\u043E\\u0437\\u0432\\u043E\\u043B\\u0435\\u043D\\u043E: pdf, png, jpg. \\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0443\\u043C: \", MAX_FILE_MB, \" \\u041C\\u0411.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }, this), progress > 0 && progress < 100 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-2 bg-gray-200 rounded\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-2 rounded bg-blue-600\",\n          style: {\n            width: `${progress}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: busy,\n        className: \"px-4 py-2 bg-blue-600 text-white rounded\",\n        children: busy ? 'Завантаження…' : 'Зберегти'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 7\n  }, this);\n}\n_s(AddDiplomaPage, \"YW4oRFWiaiU8MyG3DsypGnbFQqE=\", false, function () {\n  return [useNavigate];\n});\n_c = AddDiplomaPage;\nvar _c;\n$RefreshReg$(_c, \"AddDiplomaPage\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useMemo","useNavigate","createDiploma","getFilters","jsxDEV","_jsxDEV","MAX_FILE_MB","Number","process","env","REACT_APP_MAX_FILE_MB","ALLOWED_EXTS","extOf","name","_String$toLowerCase$m","String","toLowerCase","match","isAllowedType","file","includes","type","formatSize","bytes","toFixed","validateFile","ok","message","size","AddDiplomaPage","_s","nav","fileRef","opts","setOpts","facultiesOptions","specialtyOptionsByFacultyKey","form","setForm","studentName","facultyKey","specialty","year","diplomaNumber","setFile","err","setErr","busy","setBusy","progress","setProgress","allSpecOptions","seen","Set","all","Object","values","forEach","arr","s","has","key","add","push","label","specList","data","e","_e$payload","payload","onChange","value","files","target","prev","normalizeSpecialtyToKey","val","foundByKey","find","foundByLabel","onSubmit","_fileRef$current","_fileRef$current$file","preventDefault","realFile","current","vf","fd","FormData","append","trim","saved","id","e2","_e2$payload","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","required","map","f","min","max","ref","accept","style","width","disabled","_c","$RefreshReg$"],"sources":["D:/Uknord5he/BH3/dev/diplomas/frontend/src/pages/AddDiplomaPage.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { createDiploma, getFilters } from '../services/diplomaService';\n\nconst MAX_FILE_MB = Number(process.env.REACT_APP_MAX_FILE_MB || 10);\nconst ALLOWED_EXTS = ['pdf', 'png', 'jpg', 'jpeg'];\n\nconst extOf = (name = '') => (String(name).toLowerCase().match(/\\.([a-z0-9]+)(?:\\?.*)?$/)?.[1] || '');\nconst isAllowedType = (file) =>\n    !!file && (ALLOWED_EXTS.includes(extOf(file.name)) || file.type === 'application/pdf' || file.type === 'image/png' || file.type === 'image/jpeg');\nconst formatSize = (bytes) => `${(bytes / 1024 / 1024).toFixed(1)} МБ`;\nconst validateFile = (file) => {\n  if (!file) return { ok: false, message: 'Файл не обрано' };\n  if (!isAllowedType(file)) return { ok: false, message: 'Дозволені лише PDF, PNG, JPG' };\n  if (file.size > MAX_FILE_MB * 1024 * 1024) return { ok: false, message: `Максимальний розмір ${MAX_FILE_MB} МБ (ваш ${formatSize(file.size)})` };\n  return { ok: true };\n};\n\nexport default function AddDiplomaPage() {\n  const nav = useNavigate();\n  const fileRef = useRef(null);\n\n  // Довідники по ключам\n  const [opts, setOpts] = useState({\n    facultiesOptions: [],                 // [{key,name}]\n    specialtyOptionsByFacultyKey: {},     // { facKey: [{key,label}] }\n  });\n\n  const [form, setForm] = useState({\n    studentName: '',\n    facultyKey: '',\n    specialty: '',            // ХРАНИМ, что выбрал пользователь (обычно key, но подстрахуемся)\n    year: '',\n    diplomaNumber: '',\n  });\n\n  const [file, setFile] = useState(null);\n  const [err, setErr] = useState('');\n  const [busy, setBusy] = useState(false);\n  const [progress, setProgress] = useState(0); // сейчас fetch без прогресса, но поле не мешает\n\n  // единый список всех спеціальностей (на случай выбора без факультета и для маппинга label→key)\n  const allSpecOptions = useMemo(() => {\n    const seen = new Set();\n    const all = [];\n    Object.values(opts.specialtyOptionsByFacultyKey).forEach(arr => {\n      (arr || []).forEach(s => {\n        if (!seen.has(s.key)) { seen.add(s.key); all.push({ key: s.key, label: s.label }); }\n      });\n    });\n    return all;\n  }, [opts.specialtyOptionsByFacultyKey]);\n\n  // опции для текущего факультета (или пусто, выбор «зі всіх» мы не делаем в Add — здесь просим факультет)\n  const specList = form.facultyKey ? (opts.specialtyOptionsByFacultyKey[form.facultyKey] || []) : [];\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const data = await getFilters();\n        setOpts({\n          facultiesOptions: data.facultiesOptions || [],\n          specialtyOptionsByFacultyKey: data.specialtyOptionsByFacultyKey || {},\n        });\n      } catch (e) {\n        setErr(e?.payload?.message || e?.message || 'Помилка завантаження довідників');\n      }\n    })();\n  }, []);\n\n  const onChange = (e) => {\n    const { name, value, files } = e.target;\n    if (name === 'file') { setFile(files?.[0] || null); return; }\n    setForm(prev => ({ ...prev, [name]: value }));\n    if (name === 'facultyKey') setForm(prev => ({ ...prev, specialty: '' }));\n  };\n\n  // Подстраховка: если вдруг в state оказался label, а не key — конвертируем в key\n  const normalizeSpecialtyToKey = (val) => {\n    if (!val) return val;\n    // если это уже key — вернётся как есть\n    const foundByKey = allSpecOptions.find(s => s.key === val);\n    if (foundByKey) return foundByKey.key;\n    // может быть пришёл label\n    const foundByLabel = allSpecOptions.find(s => s.label === val);\n    return foundByLabel ? foundByLabel.key : val;\n  };\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    setErr('');\n\n    const realFile = file || fileRef.current?.files?.[0] || null;\n    const vf = validateFile(realFile);\n    if (!vf.ok) { setErr(vf.message); return; }\n\n    try {\n      setBusy(true);\n      const fd = new FormData();\n      fd.append('studentName', form.studentName.trim());\n      fd.append('specialty', normalizeSpecialtyToKey(form.specialty)); // БЭК ждёт КЛЮЧ\n      fd.append('year', String(form.year));\n      fd.append('diplomaNumber', form.diplomaNumber.trim());\n      fd.append('file', realFile);\n\n      const saved = await createDiploma(fd);\n      nav(`/diplomas/${saved?.id || ''}`);\n    } catch (e2) {\n      // показываем реальное сообщение с бэка\n      setErr(e2?.payload?.message || e2?.message || 'Помилка збереження');\n    } finally {\n      setBusy(false);\n      setProgress(0);\n    }\n  };\n\n  return (\n      <div className=\"container mx-auto p-4 max-w-2xl\">\n        <h1 className=\"text-2xl font-bold mb-4\">Додати диплом</h1>\n        {err && <div className=\"mb-3 text-red-600\">{err}</div>}\n\n        <form onSubmit={onSubmit} className=\"space-y-3\">\n          <input\n              name=\"studentName\"\n              value={form.studentName}\n              onChange={onChange}\n              placeholder=\"ПІБ\"\n              className=\"w-full border p-2 rounded\"\n              required\n          />\n\n          <select\n              name=\"facultyKey\"\n              value={form.facultyKey}\n              onChange={onChange}\n              className=\"w-full border p-2 rounded\"\n              required\n          >\n            <option value=\"\">Оберіть факультет</option>\n            {opts.facultiesOptions.map(f => <option key={f.key} value={f.key}>{f.name}</option>)}\n          </select>\n\n          <select\n              name=\"specialty\"\n              value={form.specialty}\n              onChange={onChange}\n              className=\"w-full border p-2 rounded\"\n              required\n          >\n            <option value=\"\">{form.facultyKey ? 'Оберіть спеціальність' : 'Спочатку оберіть факультет'}</option>\n            {specList.map(s => <option key={s.key} value={s.key}>{s.label}</option>)}\n          </select>\n\n          <div className=\"flex gap-2\">\n            <input\n                name=\"year\"\n                type=\"number\"\n                min=\"1900\"\n                max=\"2100\"\n                value={form.year}\n                onChange={onChange}\n                placeholder=\"Рік\"\n                className=\"w-40 border p-2 rounded\"\n                required\n            />\n            <input\n                name=\"diplomaNumber\"\n                value={form.diplomaNumber}\n                onChange={onChange}\n                placeholder=\"№ диплому\"\n                className=\"flex-1 border p-2 rounded\"\n                required\n            />\n          </div>\n\n          <div className=\"space-y-1\">\n            <input\n                ref={fileRef}\n                name=\"file\"\n                type=\"file\"\n                accept=\"application/pdf,image/png,image/jpeg\"\n                onChange={onChange}\n                className=\"w-full border p-2 rounded\"\n                required\n            />\n            <div className=\"text-xs opacity-70\">Дозволено: pdf, png, jpg. Максимум: {MAX_FILE_MB} МБ.</div>\n          </div>\n\n          {progress > 0 && progress < 100 && (\n              <div className=\"w-full h-2 bg-gray-200 rounded\">\n                <div className=\"h-2 rounded bg-blue-600\" style={{ width: `${progress}%` }} />\n              </div>\n          )}\n\n          <button disabled={busy} className=\"px-4 py-2 bg-blue-600 text-white rounded\">\n            {busy ? 'Завантаження…' : 'Зберегти'}\n          </button>\n        </form>\n      </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}