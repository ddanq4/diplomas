{"ast":null,"code":"// frontend/src/services/diplomaService.js\nimport api from './api';\n\n// универсальный прогресс-хэндлер\nconst onUpload = onProgress => ({\n  onUploadProgress: e => {\n    if (!onProgress || !(e !== null && e !== void 0 && e.total)) return;\n    const p = Math.round(e.loaded * 100 / e.total);\n    try {\n      onProgress(p);\n    } catch {/* no-op */}\n  }\n});\nexport async function getFilters() {\n  const {\n    data\n  } = await api.get('/diplomas/filters');\n  return data;\n}\nexport async function getDiplomas(params = {}) {\n  const {\n    data\n  } = await api.get('/diplomas', {\n    params\n  });\n  return data;\n}\nexport async function getDiploma(id) {\n  const {\n    data\n  } = await api.get(`/diplomas/${id}`);\n  return data;\n}\nexport async function createDiploma(formData, progressCb) {\n  // ВАЖНО: не сериализуем FormData в JSON и не ставим application/json.\n  const {\n    data\n  } = await api.post('/diplomas', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    },\n    ...onUpload(progressCb)\n  });\n  return data;\n}\nexport async function updateDiploma(id, formData, progressCb) {\n  const {\n    data\n  } = await api.patch(`/diplomas/${id}`, formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    },\n    ...onUpload(progressCb)\n  });\n  return data;\n}\nexport async function deleteDiploma(id) {\n  const {\n    data\n  } = await api.delete(`/diplomas/${id}`);\n  return data;\n}","map":{"version":3,"names":["api","onUpload","onProgress","onUploadProgress","e","total","p","Math","round","loaded","getFilters","data","get","getDiplomas","params","getDiploma","id","createDiploma","formData","progressCb","post","headers","updateDiploma","patch","deleteDiploma","delete"],"sources":["D:/Uknord5he/BH3/dev/diplomas/frontend/src/services/diplomaService.js"],"sourcesContent":["// frontend/src/services/diplomaService.js\r\nimport api from './api';\r\n\r\n// универсальный прогресс-хэндлер\r\nconst onUpload = (onProgress) => ({\r\n    onUploadProgress: (e) => {\r\n        if (!onProgress || !e?.total) return;\r\n        const p = Math.round((e.loaded * 100) / e.total);\r\n        try { onProgress(p); } catch { /* no-op */ }\r\n    },\r\n});\r\n\r\nexport async function getFilters() {\r\n    const { data } = await api.get('/diplomas/filters');\r\n    return data;\r\n}\r\n\r\nexport async function getDiplomas(params = {}) {\r\n    const { data } = await api.get('/diplomas', { params });\r\n    return data;\r\n}\r\n\r\nexport async function getDiploma(id) {\r\n    const { data } = await api.get(`/diplomas/${id}`);\r\n    return data;\r\n}\r\n\r\nexport async function createDiploma(formData, progressCb) {\r\n    // ВАЖНО: не сериализуем FormData в JSON и не ставим application/json.\r\n    const { data } = await api.post('/diplomas', formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n        ...onUpload(progressCb),\r\n    });\r\n    return data;\r\n}\r\n\r\nexport async function updateDiploma(id, formData, progressCb) {\r\n    const { data } = await api.patch(`/diplomas/${id}`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n        ...onUpload(progressCb),\r\n    });\r\n    return data;\r\n}\r\n\r\nexport async function deleteDiploma(id) {\r\n    const { data } = await api.delete(`/diplomas/${id}`);\r\n    return data;\r\n}\r\n"],"mappings":"AAAA;AACA,OAAOA,GAAG,MAAM,OAAO;;AAEvB;AACA,MAAMC,QAAQ,GAAIC,UAAU,KAAM;EAC9BC,gBAAgB,EAAGC,CAAC,IAAK;IACrB,IAAI,CAACF,UAAU,IAAI,EAACE,CAAC,aAADA,CAAC,eAADA,CAAC,CAAEC,KAAK,GAAE;IAC9B,MAAMC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAAEJ,CAAC,CAACK,MAAM,GAAG,GAAG,GAAIL,CAAC,CAACC,KAAK,CAAC;IAChD,IAAI;MAAEH,UAAU,CAACI,CAAC,CAAC;IAAE,CAAC,CAAC,MAAM,CAAE;EACnC;AACJ,CAAC,CAAC;AAEF,OAAO,eAAeI,UAAUA,CAAA,EAAG;EAC/B,MAAM;IAAEC;EAAK,CAAC,GAAG,MAAMX,GAAG,CAACY,GAAG,CAAC,mBAAmB,CAAC;EACnD,OAAOD,IAAI;AACf;AAEA,OAAO,eAAeE,WAAWA,CAACC,MAAM,GAAG,CAAC,CAAC,EAAE;EAC3C,MAAM;IAAEH;EAAK,CAAC,GAAG,MAAMX,GAAG,CAACY,GAAG,CAAC,WAAW,EAAE;IAAEE;EAAO,CAAC,CAAC;EACvD,OAAOH,IAAI;AACf;AAEA,OAAO,eAAeI,UAAUA,CAACC,EAAE,EAAE;EACjC,MAAM;IAAEL;EAAK,CAAC,GAAG,MAAMX,GAAG,CAACY,GAAG,CAAC,aAAaI,EAAE,EAAE,CAAC;EACjD,OAAOL,IAAI;AACf;AAEA,OAAO,eAAeM,aAAaA,CAACC,QAAQ,EAAEC,UAAU,EAAE;EACtD;EACA,MAAM;IAAER;EAAK,CAAC,GAAG,MAAMX,GAAG,CAACoB,IAAI,CAAC,WAAW,EAAEF,QAAQ,EAAE;IACnDG,OAAO,EAAE;MAAE,cAAc,EAAE;IAAsB,CAAC;IAClD,GAAGpB,QAAQ,CAACkB,UAAU;EAC1B,CAAC,CAAC;EACF,OAAOR,IAAI;AACf;AAEA,OAAO,eAAeW,aAAaA,CAACN,EAAE,EAAEE,QAAQ,EAAEC,UAAU,EAAE;EAC1D,MAAM;IAAER;EAAK,CAAC,GAAG,MAAMX,GAAG,CAACuB,KAAK,CAAC,aAAaP,EAAE,EAAE,EAAEE,QAAQ,EAAE;IAC1DG,OAAO,EAAE;MAAE,cAAc,EAAE;IAAsB,CAAC;IAClD,GAAGpB,QAAQ,CAACkB,UAAU;EAC1B,CAAC,CAAC;EACF,OAAOR,IAAI;AACf;AAEA,OAAO,eAAea,aAAaA,CAACR,EAAE,EAAE;EACpC,MAAM;IAAEL;EAAK,CAAC,GAAG,MAAMX,GAAG,CAACyB,MAAM,CAAC,aAAaT,EAAE,EAAE,CAAC;EACpD,OAAOL,IAAI;AACf","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}