{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { api } from '../services/api';\nexport function useAuth() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setLoading(false);\n      return;\n    }\n    api.get('/me').then(res => setUser(res.data.user)).catch(() => {\n      localStorage.removeItem('token');\n      setUser(null);\n    }).finally(() => setLoading(false));\n  }, []);\n  const logout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n    window.location.href = '/login';\n  };\n  return {\n    user,\n    loading,\n    logout\n  };\n}\n_s(useAuth, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");","map":{"version":3,"names":["useEffect","useState","api","useAuth","_s","user","setUser","loading","setLoading","token","localStorage","getItem","get","then","res","data","catch","removeItem","finally","logout","window","location","href"],"sources":["D:/Uknord5he/BH3/dev/diplomas/frontend/src/hooks/useAuth.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { api } from '../services/api';\r\n\r\nexport function useAuth() {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) { setLoading(false); return; }\r\n        api.get('/me')\r\n            .then(res => setUser(res.data.user))\r\n            .catch(() => { localStorage.removeItem('token'); setUser(null); })\r\n            .finally(() => setLoading(false));\r\n    }, []);\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        setUser(null);\r\n        window.location.href = '/login';\r\n    };\r\n\r\n    return { user, loading, logout };\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,GAAG,QAAQ,iBAAiB;AAErC,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACtB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACZ,MAAMS,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MAAED,UAAU,CAAC,KAAK,CAAC;MAAE;IAAQ;IACzCN,GAAG,CAACU,GAAG,CAAC,KAAK,CAAC,CACTC,IAAI,CAACC,GAAG,IAAIR,OAAO,CAACQ,GAAG,CAACC,IAAI,CAACV,IAAI,CAAC,CAAC,CACnCW,KAAK,CAAC,MAAM;MAAEN,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC;MAAEX,OAAO,CAAC,IAAI,CAAC;IAAE,CAAC,CAAC,CACjEY,OAAO,CAAC,MAAMV,UAAU,CAAC,KAAK,CAAC,CAAC;EACzC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMW,MAAM,GAAGA,CAAA,KAAM;IACjBT,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC;IAChCX,OAAO,CAAC,IAAI,CAAC;IACbc,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACnC,CAAC;EAED,OAAO;IAAEjB,IAAI;IAAEE,OAAO;IAAEY;EAAO,CAAC;AACpC;AAACf,EAAA,CApBeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}