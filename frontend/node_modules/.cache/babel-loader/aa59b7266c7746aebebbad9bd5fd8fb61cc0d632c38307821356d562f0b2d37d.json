{"ast":null,"code":"// frontend/src/services/api.js\nimport axios from 'axios';\n\n// Хост бэка (без /api) — как и раньше\nconst HOST = (process.env.REACT_APP_API_URL || 'http://localhost:5000').trim().replace(/\\/+$/, '');\nexport const API_BASE = HOST; // оставляем для совместимости\n\n// Нормальный URL к API: apiUrl('/diplomas/ID/file') -> http://host:5000/api/diplomas/ID/file\nexport const apiUrl = (path = '') => `${HOST}/api/${String(path).replace(/^\\/+/, '')}`;\n\n// axios для всех REST-запросов\nconst api = axios.create({\n  baseURL: `${HOST}/api`,\n  withCredentials: true,\n  headers: {\n    'X-Requested-With': 'XMLHttpRequest'\n  }\n});\n\n// токен, если есть\napi.interceptors.request.use(cfg => {\n  const t = localStorage.getItem('token');\n  if (t) cfg.headers.Authorization = `Bearer ${t}`;\n  return cfg;\n});\nexport default api;","map":{"version":3,"names":["axios","HOST","process","env","REACT_APP_API_URL","trim","replace","API_BASE","apiUrl","path","String","api","create","baseURL","withCredentials","headers","interceptors","request","use","cfg","t","localStorage","getItem","Authorization"],"sources":["D:/Uknord5he/BH3/dev/diplomas/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\r\nimport axios from 'axios';\r\n\r\n// Хост бэка (без /api) — как и раньше\r\nconst HOST = (process.env.REACT_APP_API_URL || 'http://localhost:5000')\r\n    .trim()\r\n    .replace(/\\/+$/, '');\r\n\r\nexport const API_BASE = HOST; // оставляем для совместимости\r\n\r\n// Нормальный URL к API: apiUrl('/diplomas/ID/file') -> http://host:5000/api/diplomas/ID/file\r\nexport const apiUrl = (path = '') =>\r\n    `${HOST}/api/${String(path).replace(/^\\/+/, '')}`;\r\n\r\n// axios для всех REST-запросов\r\nconst api = axios.create({\r\n    baseURL: `${HOST}/api`,\r\n    withCredentials: true,\r\n    headers: { 'X-Requested-With': 'XMLHttpRequest' },\r\n});\r\n\r\n// токен, если есть\r\napi.interceptors.request.use((cfg) => {\r\n    const t = localStorage.getItem('token');\r\n    if (t) cfg.headers.Authorization = `Bearer ${t}`;\r\n    return cfg;\r\n});\r\n\r\nexport default api;\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,IAAI,GAAG,CAACC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB,EACjEC,IAAI,CAAC,CAAC,CACNC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;AAExB,OAAO,MAAMC,QAAQ,GAAGN,IAAI,CAAC,CAAC;;AAE9B;AACA,OAAO,MAAMO,MAAM,GAAGA,CAACC,IAAI,GAAG,EAAE,KAC5B,GAAGR,IAAI,QAAQS,MAAM,CAACD,IAAI,CAAC,CAACH,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;;AAErD;AACA,MAAMK,GAAG,GAAGX,KAAK,CAACY,MAAM,CAAC;EACrBC,OAAO,EAAE,GAAGZ,IAAI,MAAM;EACtBa,eAAe,EAAE,IAAI;EACrBC,OAAO,EAAE;IAAE,kBAAkB,EAAE;EAAiB;AACpD,CAAC,CAAC;;AAEF;AACAJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,GAAG,IAAK;EAClC,MAAMC,CAAC,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACvC,IAAIF,CAAC,EAAED,GAAG,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,CAAC,EAAE;EAChD,OAAOD,GAAG;AACd,CAAC,CAAC;AAEF,eAAeR,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}